# yxbl_1
The code repository for the first paper during the doctoral period.


狼人杀项目/
├── src/
│   ├── environment/
│   │   ├── __init__.py
│   │   ├── werewolf_env.py      # 狼人杀游戏环境（MDP实现）
│   │   ├── game_state.py        # 游戏状态管理
│   │   ├── game_logic.py        # 游戏规则与逻辑
│   │   ├── game_manager.py      # 游戏阶段管理(夜晚、白天等)
│   │   ├── reward.py            # 奖励函数
│   │   └── action_space.py      # 行动空间定义
│   ├── agents/
│   │   ├── __init__.py
│   │   ├── base_agent.py        # 基础智能体接口
│   │   ├── rule_agent.py        # 基于规则的智能体
│   │   └── learning_agent.py    # 强化学习智能体
│   ├── roles/
│   │   ├── __init__.py
│   │   ├── role.py              # 角色基类
│   │   ├── villager.py          # 村民角色
│   │   ├── werewolf.py          # 狼人角色
│   │   ├── doctor.py            # 医生角色
│   │   └── seer.py              # 预言家角色
│   ├── RL/
│   │   ├── __init__.py
│   │   ├── models.py            # 神经网络模型定义
│   │   ├── memory.py            # 经验回放缓冲区
│   │   └── algorithms/
│   │       ├── __init__.py
│   │       ├── dqn.py           # DQN算法实现
│   │       ├── ppo.py           # PPO算法实现
│   │       └── a2c.py           # A2C算法实现
│   └── utils/
│       └── __init__.py
├── train.py                     # 训练脚本
├── evaluate.py                  # 评估脚本
├── config.py                    # 配置文件
└── main.py                      # 主程序入口

夜晚流程：
1. 狼人：在场存活的狼人睁眼。如果存活的狼人数量为2，则第1个狼人根据分析，然后决定杀谁。如果第2个狼人同意第1个狼人的决定，则狼人达成共识选定受害者。如果第2个狼人不同意的第1个狼人的决定，则第2个狼人给出分析，然后决定杀谁。如果第1个狼人同意第2个狼人的决定，则狼人达成共识杀害第2个狼人选定的受害者，否则第1个狼人继续给出自己的分析和决定。以此反复5个来回，若狼人们仍无法达成共识选定受害者，则这一夜将没有人被害。如果存活的狼人数量为1，则唯一的狼人决定杀害谁。无论有没有达成共识选定受害者，狼人闭眼。
2. 医生：医生如果还存活的话，角色为医生的存活玩家选择决定救治在场存活的哪一位玩家。系统将判断，如果医生选择的玩家和狼人杀害的玩家为同一人，则该玩家被救活，这一夜将无人死去。医生闭眼。
3. 预言家：预言家如果还存活的话，角色为预言家的存活玩家选择查验在场存活的某一位玩家身份。系统将告诉预言家这名玩家的真实游戏身份。预言家闭眼。
- 如果医生和预言家被杀害，在夜晚阶段仍会有医生和预言家的角色行动阶段，但不会有任何事情发生。

白天流程：
1. 所有人睁眼。
2. 系统宣布昨晚被杀（或救）的人是谁。如果有人被杀害，则被杀害的玩家将退出游戏不能再发言，但改名被杀害玩家的角色身份不会被披露。
3. 按照存活玩家的ID顺序，每一名玩家将进行分析，表达自己的想法。
4. 当所有存活玩家按顺序表达完自己的想法后，所有存活玩家将依次投票选择出一名可能是狼人的玩家。
5. 得票数最多的玩家将被淘汰。若有2名玩家的得票数相同，将重新进行第2轮投票，存活玩家将在这2人中重新进行投票，得票数最多的玩家将被淘汰。如果第2轮投票仍未平票，则不会有玩家被淘汰，游戏进入到下一夜。